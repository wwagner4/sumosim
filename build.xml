<!--suppress ALL -->
<project name="sumosim-main">
	<property file="build.properties"/>
	<property name="mhome" value="../sumosim2-mobile" />

	<target name="toMobile">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true fullOptJS"/>
		</exec>
		<copy todir="${mhome}" verbose="true" overwrite="true">
			<fileset dir="sumosim-scalajs">
				<include name="src/main/resources/**/*"/>
				<include name="target/scala-2.10/*-opt.js"/>
			</fileset>
		</copy>
		<copy todir="${mhome}" verbose="true">
			<fileset dir="sumosim-scalajs">
				<include name="js/**/*"/>
			</fileset>
		</copy>
		<copy tofile="${mhome}/index.html" file="sumosim-scalajs/index.html" verbose="true">
		</copy>
        <replace file="${mhome}/index.html" token="fastopt.js" value="opt.js"/>

	</target>
	
	<target name="fastOptJS">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true fastOptJS"/>
		</exec>
	</target>
	
	<target name="test">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true test"/>
		</exec>
	</target>
	
	<target name="eclipse">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true eclipse"/>
		</exec>
	</target>
	
	<target name="idea">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true genIda"/>
		</exec>
	</target>
	
	<target name="cleanTest">
		<exec executable="${sbt}" failonerror="true">
			<arg line="-Dsbt.log.noformat=true clean test"/>
		</exec>
	</target>
	

</project>